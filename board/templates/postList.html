{% extends 'layout.html' %}
{% load board_extras %}

{% block header_title %}
    {{ header_title }}
{% endblock %}

{% block header_content %}
    <a href="{% url 'write_post' %}?type={{ dir }}" class="ui button inverted basic">게시글 작성</a>

{% endblock %}

{% block head %}
    <script>
        $(function () {
            $(".pagination > .item").click(function () {
                $("input[name=page]").val($(this).attr("page-num"));
                $("#page-form").submit();
            });
        });
    </script>
{% endblock %}

{% block body %}
    <form id="page-form" method="get">
        <input type="hidden" name="page" value="{{ page.number }}">
    </form>

    <div class="ui text container">
        {% if dir == 'announcement' %}
            <h1 class="ui header">중요 공지사항</h1>
            <div class="ui divider"></div>
            <div class="ui divided items">
                {% for post in important_page %}
                <div class="item">
                        <div class="ui small rounded image">
                            <img src="/../../static/mainapp/img/sodam01.jpg" style="width:150px;height:150px;">
                        </div>
                        <div class="middle aligned content">
                            <a href={% url 'announcement_detail' id=post.pk %} class="header" style="">{{ post.title }}</a>
                            <div class="meta">
                                <span>{% autoescape off %}
                                    {{ post.content|get_text|truncatechars:150 }}{% endautoescape %}</span>
                            </div>
                            <div class="description">
                                <br>
                            </div>
                            <div class="extra">
                                <i class="user icon"></i>
                                <span class="writer">{{ post.writer }}</span>&nbsp;&nbsp;&nbsp;&nbsp;
                                <i class="calendar icon"></i>
                                <span class="posted_date">{{ post.write_date|date:'Y년 m월 d일' }}</span>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        <h1 class="ui header">{{ header_title }}</h1>
        <div class="ui divider"></div>
        <div class="ui divided items">
            {% for post in page %}
                <div class="item">
                    <div class="ui small rounded image">
                    <img src="/../../static/mainapp/img/sodam01.jpg" style="width:150px;height:150px;">
                    </div>
                    <div class="middle aligned content">
                    {% if dir == 'seminar' %}
                        <a href={% url 'seminar_detail' id=post.pk %} class="header" style="">{{ post.title }}</a>
                    {% elif dir == 'playstorming' %}
                        <a href={% url 'playstorming_detail' id=post.pk %} class="header" style="">{{ post.title }}</a>
                    {% elif dir == 'announcement' %}
                        <a href={% url 'announcement_detail' id=post.pk %} class="header" style="">{{ post.title }}</a>
                    {% elif dir == 'graduating' %}
                        <a href={% url 'graduating_detail' id=post.pk %} class="header" style="">{{ post.title }}</a>
                    {% elif dir == 'student' %}
                        <a href={% url 'student_detail' id=post.pk %} class="header" style="">{{ post.title }}</a>
                    {% endif %}
                        <div class="meta">
                            <span>{% autoescape off %}
                                {{ post.content|get_text|truncatechars:150 }}{% endautoescape %}</span>
                        </div>
                        <div class="description">
                            <br>
                        </div>
                        <div class="extra">
                            {% if header_title != '플레이스토밍' %}
                                <i class="user icon"></i>
                                <span class="writer">{{ post.writer }}</span>&nbsp;&nbsp;&nbsp;&nbsp;
                            {% endif %}
                            <i class="calendar icon"></i>
                            <span class="posted_date">{{ post.write_date|date:'Y년 m월 d일' }}</span>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <br>

        {% include 'easy_paginator.html' %}
    </div>
    <br>
{% endblock %}